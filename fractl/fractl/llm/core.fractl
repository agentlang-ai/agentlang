(component :Fractl.Llm.Core
           {:refer [:Fractl.Kernel.Lang]})

(record
 :ChatLanguageModel
 {:Id :Identity})

(entity
 :OpenAiChatModel
 {:meta {:inherits :ChatLanguageModel}
  :apiKey {:type :String :optional true}
  :modelName {:type :String :optional true}
  :temperature {:type :Double :optional true}
  :timeoutInSeconds {:type :Int :optional true}
  :frequencyPenalty {:type :Double :optional true}
  :maxTokens {:type :Int :optional true}
  :maxRetries {:type :Int :optional true}
  :presencePenalty {:type :Double :optional true}
  :seed {:type :Int :optional true}
  :stop {:listof :String :optional true}
  :topP {:type :Double :optional true}
  :user {:type :String :optional true}
  :logRequests {:type :Boolean :optional true}
  :logResponses {:type :Boolean :optional true}})

(record :ChatMessage {})

(record
 :UserMessage
 {:meta {:inherits :ChatMessage}
  :Content {:listof :String}})

(record
 :AiMessage
 {:meta {:inherits :ChatMessage}
  :Text :String})

(event
 :Generate
 {:Model :ChatLanguageModel
  :Messages {:listof :ChatMessage}})
